{"version":3,"file":"index.es.js","sources":["../src/payconductor/iframe/constants.ts","../src/payconductor/iframe/types.ts","../src/payconductor/constants.ts","../src/payconductor/utils.ts","../src/payconductor/internal.ts","../src/payconductor/payconductor.tsx","../src/payconductor/hooks/use-payconductor.ts","../src/payconductor/hooks/use-element.ts"],"sourcesContent":["// PayConductor Shared Constants\n// Served statically at iframe.payconductor.ai/constants.ts\n// Used by the iFrame (imported directly) and the SDK Web (synced with: bun sync)\n\nexport const APP_BASE_URL_PROD = \"https://app.payconductor.ai\";\nexport const API_BASE_URL_PROD = \"https://app.payconductor.ai/api/v1\";\nexport const IFRAME_BASE_URL_PROD = \"https://iframe.payconductor.ai\";\nexport const IFRAME_BASE_URL_DEV = \"http://localhost:5175\";\nexport const APP_BASE_URL_DEV = \"http://localhost:3000\";\nexport const DEFAULT_LOCALE = \"pt-BR\";\nexport const REQUEST_TIMEOUT_MS = 30000;\nexport const IFRAME_DEFAULT_HEIGHT = \"600px\"","// PayConductor Shared Types\n// Served statically at iframe.payconductor.ai/types.ts\n// Used by the iFrame (imported directly) and the SDK Web (synced with: bun sync)\n\nexport enum PaymentMethod {\n  Pix = \"Pix\",\n  CreditCard = \"CreditCard\",\n  DebitCard = \"DebitCard\",\n  BankSlip = \"BankSlip\",\n  Crypto = \"Crypto\",\n  ApplePay = \"ApplePay\",\n  NuPay = \"NuPay\",\n  PicPay = \"PicPay\",\n  AmazonPay = \"AmazonPay\",\n  SepaDebit = \"SepaDebit\",\n  GooglePay = \"GooglePay\",\n}\nexport enum PaymentMethodLayout {\n  Grid = \"grid\",\n  Vertical = \"vertical\",\n  Horizontal = \"horizontal\",\n}\nexport enum PaymentStatus {\n  Succeeded = \"succeeded\",\n  Pending = \"pending\",\n  Failed = \"failed\",\n}\nexport enum DeviceType {\n  Android = \"android\",\n  IOS = \"ios\",\n  Web = \"web\",\n}\nexport enum InputStyleKey {\n  Padding = \"padding\",\n  Radius = \"radius\",\n  Color = \"color\",\n  Background = \"background\",\n  Shadow = \"shadow\",\n}\nexport enum OutgoingMessage {\n  Init = \"Init\",\n  Config = \"Config\",\n  Update = \"Update\",\n  ConfirmPayment = \"ConfirmPayment\",\n  Validate = \"Validate\",\n  Reset = \"Reset\",\n}\nexport enum IncomingMessage {\n  Ready = \"Ready\",\n  Error = \"Error\",\n  PaymentComplete = \"PaymentComplete\",\n  PaymentFailed = \"PaymentFailed\",\n  PaymentPending = \"PaymentPending\",\n  ValidationError = \"ValidationError\",\n  PaymentMethodSelected = \"PaymentMethodSelected\",\n}\nexport enum ErrorCode {\n  InvalidClient = \"InvalidClient\",\n  InvalidToken = \"InvalidToken\",\n  NetworkError = \"NetworkError\",\n  IframeNotReady = \"IframeNotReady\",\n  PaymentDeclined = \"PaymentDeclined\",\n  ValidationError = \"ValidationError\",\n  Timeout = \"Timeout\",\n}\nexport type InputStyleConfig = {\n  padding?: string;\n  radius?: string;\n  color?: string;\n  background?: string;\n  shadow?: string;\n};\nexport type PaymentMethodsConfig = {\n  layout?: PaymentMethodLayout;\n  gap?: string;\n  inputStyle?: InputStyleConfig;\n};\nexport type PaymentMethodConfig = {\n  method: PaymentMethod;\n  discount?: number;\n  showBrands?: boolean;\n  installments?: {\n    count: number;\n    amount: number;\n  }[];\n};\nexport type PaymentMethodsResponse = {\n  methods: PaymentMethod[];\n  config: PaymentMethodsConfig;\n};\nexport type PayConductorTheme = {\n  primaryColor?: string;\n  secondaryColor?: string;\n  backgroundColor?: string;\n  surfaceColor?: string;\n  textColor?: string;\n  textSecondaryColor?: string;\n  errorColor?: string;\n  successColor?: string;\n  warningColor?: string;\n  borderColor?: string;\n  disabledColor?: string;\n  fontFamily?: string;\n  fontSize?: {\n    xs?: string;\n    sm?: string;\n    md?: string;\n    lg?: string;\n    xl?: string;\n  };\n  fontWeight?: {\n    normal?: number;\n    medium?: number;\n    bold?: number;\n  };\n  lineHeight?: string;\n  spacing?: {\n    xs?: string;\n    sm?: string;\n    md?: string;\n    lg?: string;\n    xl?: string;\n  };\n  borderRadius?: string;\n  borderWidth?: string;\n  boxShadow?: string;\n  boxShadowHover?: string;\n  inputBackground?: string;\n  inputBorderColor?: string;\n  inputBorderRadius?: string;\n  inputHeight?: string;\n  inputPadding?: string;\n  buttonHeight?: string;\n  buttonPadding?: string;\n  buttonBorderRadius?: string;\n  transitionDuration?: string;\n  transitionTimingFunction?: string;\n};\nexport const defaultTheme: PayConductorTheme = {\n  primaryColor: \"#0066ff\",\n  secondaryColor: \"#5a6b7c\",\n  backgroundColor: \"transparent\",\n  surfaceColor: \"#f8fafc\",\n  textColor: \"#0f172a\",\n  textSecondaryColor: \"#64748b\",\n  errorColor: \"#ef4444\",\n  successColor: \"#22c55e\",\n  warningColor: \"#f59e0b\",\n  borderColor: \"#e2e8f0\",\n  disabledColor: \"#cbd5e1\",\n  fontFamily: '\"Poppins\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\n  fontSize: {\n    xs: \"0.75rem\",\n    sm: \"0.875rem\",\n    md: \"1rem\",\n    lg: \"1.125rem\",\n    xl: \"1.25rem\"\n  },\n  fontWeight: {\n    normal: 400,\n    medium: 500,\n    bold: 600\n  },\n  lineHeight: \"1.5\",\n  spacing: {\n    xs: \"4px\",\n    sm: \"8px\",\n    md: \"16px\",\n    lg: \"24px\",\n    xl: \"32px\"\n  },\n  borderRadius: \"8px\",\n  borderWidth: \"1px\",\n  boxShadow: \"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)\",\n  boxShadowHover: \"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)\",\n  inputBackground: \"#ffffff\",\n  inputBorderColor: \"#cbd5e1\",\n  inputBorderRadius: \"8px\",\n  inputHeight: \"44px\",\n  inputPadding: \"12px 16px\",\n  buttonHeight: \"48px\",\n  buttonPadding: \"16px 24px\",\n  buttonBorderRadius: \"8px\",\n  transitionDuration: \"0.2s\",\n  transitionTimingFunction: \"ease\"\n};\nexport type PayConductorConfig = {\n  publicKey: string;\n  intentToken?: string;\n  theme?: PayConductorTheme;\n  locale?: string;\n  paymentMethods?: PaymentMethod[] | \"all\";\n  defaultPaymentMethod?: PaymentMethod;\n  paymentMethodsConfig?: PaymentMethodConfig[];\n  methodsDirection?: \"vertical\" | \"horizontal\";\n  showPaymentButtons?: boolean;\n  /** Required when NuPay is an available payment method */\n  nuPayConfig?: NuPayData;\n};\nexport type BillingDetails = {\n  name: string;\n  email?: string;\n  phone?: string;\n  address?: {\n    line1: string;\n    line2?: string;\n    city: string;\n    state: string;\n    postalCode: string;\n    country: string;\n  };\n};\nexport type CardData = {\n  number: string;\n  expMonth: string;\n  expYear: string;\n  cvc: string;\n};\nexport type CreatePaymentMethodOptions = {\n  billingDetails: BillingDetails;\n  card?: CardData;\n};\nexport type PaymentMethodResult = {\n  id: string;\n  type: PaymentMethod;\n  card?: {\n    brand: string;\n    last4: string;\n    expMonth: number;\n    expYear: number;\n  };\n  billingDetails?: BillingDetails;\n};\nexport type PaymentResult = {\n  paymentIntentId: string;\n  status: PaymentStatus;\n  amount: number;\n  currency: string;\n  message?: string;\n};\nexport interface MessagePayload {\n  type: OutgoingMessage | IncomingMessage;\n  data?: unknown;\n  requestId?: string;\n  error?: {\n    code: string;\n    message: string;\n    field?: string;\n  };\n}\nexport type CardTokenData = {\n  token: string;\n  firstSixCardNumber?: string;\n};\nexport type CardFullData = {\n  number: string;\n  holderName: string;\n  cvv: string;\n  expiration: {\n    month: number;\n    year: number;\n  };\n};\nexport type CardPaymentData = CardTokenData | CardFullData;\nexport type PixPaymentData = {\n  paymentMethod: PaymentMethod.Pix;\n  expirationInSeconds?: number;\n};\nexport type CreditCardPaymentData = {\n  paymentMethod: PaymentMethod.CreditCard;\n  card: CardPaymentData;\n  installments: number;\n  softDescriptor?: string;\n};\nexport type BankSlipPaymentData = {\n  paymentMethod: PaymentMethod.BankSlip;\n  expirationInDays?: number;\n};\nexport type NuPayData = {\n  cancelUrl: string;\n  merchantName: string;\n  returnUrl: string;\n  storeName?: string;\n};\nexport type NuPayPaymentData = {\n  paymentMethod: PaymentMethod.NuPay;\n  nuPay: NuPayData;\n};\nexport type PicPayPaymentData = {\n  paymentMethod: PaymentMethod.PicPay;\n};\nexport type PaymentConfirmData = PixPaymentData | CreditCardPaymentData | BankSlipPaymentData | NuPayPaymentData | PicPayPaymentData","import { IFRAME_BASE_URL_DEV, IFRAME_BASE_URL_PROD, IFRAME_DEFAULT_HEIGHT, REQUEST_TIMEOUT_MS } from \"./iframe/constants\";\nimport { IncomingMessage, OutgoingMessage } from \"./iframe/types\";\nconst isDev = typeof window !== \"undefined\" && (window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\" || window.location.port === \"5175\");\nexport const IFRAME_BASE_URL = isDev ? IFRAME_BASE_URL_DEV : IFRAME_BASE_URL_PROD;\nexport const ALLOWED_ORIGINS = [IFRAME_BASE_URL_DEV, IFRAME_BASE_URL_PROD];\nexport const IFRAME_DEFAULT_HEIGHT_VALUE = IFRAME_DEFAULT_HEIGHT;\nexport const REQUEST_TIMEOUT = REQUEST_TIMEOUT_MS;\nexport const POST_MESSAGES = {\n  INIT: OutgoingMessage.Init,\n  CONFIG: OutgoingMessage.Config,\n  UPDATE: OutgoingMessage.Update,\n  CONFIRM_PAYMENT: OutgoingMessage.ConfirmPayment,\n  VALIDATE: OutgoingMessage.Validate,\n  RESET: OutgoingMessage.Reset,\n  READY: IncomingMessage.Ready,\n  ERROR: IncomingMessage.Error,\n  PAYMENT_COMPLETE: IncomingMessage.PaymentComplete,\n  PAYMENT_FAILED: IncomingMessage.PaymentFailed,\n  PAYMENT_PENDING: IncomingMessage.PaymentPending,\n  VALIDATION_ERROR: IncomingMessage.ValidationError,\n  PAYMENT_METHOD_SELECTED: IncomingMessage.PaymentMethodSelected\n} as const;\nexport const ERROR_CODES = {\n  INVALID_CLIENT: \"InvalidClient\",\n  INVALID_TOKEN: \"InvalidToken\",\n  NETWORK_ERROR: \"NetworkError\",\n  IFRAME_NOT_READY: \"IframeNotReady\",\n  PAYMENT_DECLINED: \"PaymentDeclined\",\n  VALIDATION_ERROR: \"ValidationError\",\n  TIMEOUT: \"Timeout\"\n} as const","import { IFRAME_BASE_URL } from \"./constants\";\nimport type { PayConductorConfig } from \"./iframe/types\";\nexport function buildIframeUrl(config: PayConductorConfig): string {\n  const params = new URLSearchParams({\n    publicKey: config.publicKey\n  });\n  return `${IFRAME_BASE_URL}?${params.toString()}`;\n}\nexport function generateRequestId(): string {\n  return crypto.randomUUID();\n}\nexport function isValidOrigin(origin: string, allowedOrigins: string[]): boolean {\n  return allowedOrigins.includes(origin);\n}","import { ALLOWED_ORIGINS, POST_MESSAGES, REQUEST_TIMEOUT } from \"./constants\";\nimport { IncomingMessage, OutgoingMessage, PayConductorConfig, PaymentMethod, PaymentResult } from \"./iframe/types\";\nimport type { ConfirmPaymentOptions, PendingRequest } from \"./types\";\nimport { generateRequestId, isValidOrigin } from \"./utils\";\nexport function createPendingRequestsMap(): Map<string, PendingRequest> {\n  return new Map<string, PendingRequest>();\n}\nexport function sendMessageToIframe(iframe: HTMLIFrameElement | Element | undefined, pendingMap: Map<string, PendingRequest> | null, type: OutgoingMessage | IncomingMessage, data?: unknown): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    if (!iframe || !(\"contentWindow\" in iframe)) {\n      reject(new Error(\"Iframe not defined\"));\n      return;\n    }\n    if (!iframe?.contentWindow) {\n      reject(new Error(\"Iframe not ready\"));\n      return;\n    }\n    if (!pendingMap) {\n      reject(new Error(\"Pending requests not initialized\"));\n      return;\n    }\n    const requestId = generateRequestId();\n    pendingMap.set(requestId, {\n      resolve,\n      reject\n    });\n    iframe.contentWindow.postMessage({\n      type,\n      data,\n      requestId\n    }, \"*\");\n    setTimeout(() => {\n      if (pendingMap?.has(requestId)) {\n        pendingMap.delete(requestId);\n        reject(new Error(\"Request timeout\"));\n      }\n    }, REQUEST_TIMEOUT);\n  });\n}\nexport function confirmPayment(iframe: HTMLIFrameElement | Element | undefined, pendingMap: Map<string, PendingRequest> | null, options: ConfirmPaymentOptions): Promise<PaymentResult> {\n  return sendMessageToIframe(iframe, pendingMap, POST_MESSAGES.CONFIRM_PAYMENT, {\n    intentToken: options.intentToken\n  }) as Promise<PaymentResult>;\n}\nexport function validatePayment(iframe: HTMLIFrameElement | Element | undefined, pendingMap: Map<string, PendingRequest> | null, data: unknown): Promise<boolean> {\n  return sendMessageToIframe(iframe, pendingMap, POST_MESSAGES.VALIDATE, data) as Promise<boolean>;\n}\nexport function resetPayment(iframe: HTMLIFrameElement | Element | undefined, pendingMap: Map<string, PendingRequest> | null): Promise<void> {\n  return sendMessageToIframe(iframe, pendingMap, POST_MESSAGES.RESET) as Promise<void>;\n}\nexport function sendConfig(iframe: HTMLIFrameElement | Element | undefined, pendingMap: Map<string, PendingRequest> | null, config: Pick<PayConductorConfig, \"intentToken\" | \"theme\" | \"locale\" | \"paymentMethods\" | \"defaultPaymentMethod\" | \"showPaymentButtons\" | \"nuPayConfig\">): Promise<void> {\n  return sendMessageToIframe(iframe, pendingMap, POST_MESSAGES.CONFIG, config) as Promise<void>;\n}\ntype MessagePayload = {\n  requestId?: string;\n  type?: string;\n  data?: PaymentResult | {\n    paymentMethod: PaymentMethod;\n  };\n  error?: {\n    message?: string;\n  };\n};\nexport function handleMessageEvent(event: MessageEvent, pendingMap: Map<string, PendingRequest> | null, setIsReady: (value: boolean) => void, setError: (value: string | null) => void, onReady?: () => void, onError?: (error: Error) => void, onPaymentComplete?: (data: PaymentResult) => void, onPaymentFailed?: (data: PaymentResult) => void, onPaymentPending?: (data: PaymentResult) => void, onPaymentMethodSelected?: (method: PaymentMethod) => void) {\n  if (!isValidOrigin(event.origin, ALLOWED_ORIGINS)) {\n    return;\n  }\n  const payload: MessagePayload = event.data;\n  const {\n    requestId,\n    type,\n    data,\n    error\n  } = payload;\n  if (requestId && pendingMap?.has(requestId)) {\n    const {\n      resolve,\n      reject\n    } = pendingMap.get(requestId)!;\n    pendingMap.delete(requestId);\n    if (error) {\n      reject(new Error(error.message));\n    } else {\n      resolve(data);\n    }\n    return;\n  }\n  if (type === POST_MESSAGES.READY) {\n    setIsReady(true);\n    onReady?.();\n    return;\n  }\n  if (type === POST_MESSAGES.ERROR) {\n    setError(error?.message || \"Unknown error\");\n    onError?.(new Error(error?.message));\n    return;\n  }\n  if (type === POST_MESSAGES.PAYMENT_COMPLETE) {\n    if (data && typeof data === \"object\" && \"status\" in data) {\n      onPaymentComplete?.(data);\n    }\n    return;\n  }\n  if (type === POST_MESSAGES.PAYMENT_FAILED) {\n    if (data && typeof data === \"object\" && \"status\" in data) {\n      onPaymentFailed?.(data);\n    }\n    return;\n  }\n  if (type === POST_MESSAGES.PAYMENT_PENDING) {\n    if (data && typeof data === \"object\" && \"status\" in data) {\n      onPaymentPending?.(data);\n    }\n    return;\n  }\n  if (type === POST_MESSAGES.PAYMENT_METHOD_SELECTED) {\n    if (data && typeof data === \"object\" && \"paymentMethod\" in data) {\n      onPaymentMethodSelected?.(data.paymentMethod);\n    }\n    return;\n  }\n}","\"use client\";\nimport * as React from \"react\";\nimport { useState, useRef, useEffect } from \"react\";\n\nexport interface PayConductorEmbedProps extends PayConductorConfig {\n  height?: string;\n  children?: any;\n  showActionButtons?: boolean;\n  onReady?: () => void;\n  onError?: (error: Error) => void;\n  onPaymentComplete?: (result: PaymentResult) => void;\n  onPaymentFailed?: (result: PaymentResult) => void;\n  onPaymentPending?: (result: PaymentResult) => void;\n  onPaymentMethodSelected?: (method: PaymentMethod) => void;\n}\n\nimport { IFRAME_DEFAULT_HEIGHT_VALUE } from \"./constants\";\nimport type {\n  PayConductorConfig,\n  PaymentMethod,\n  PaymentResult,\n} from \"./iframe/types\";\nimport {\n  confirmPayment,\n  createPendingRequestsMap,\n  handleMessageEvent,\n  resetPayment,\n  sendConfig,\n  validatePayment,\n} from \"./internal\";\nimport type {\n  PayConductorApi,\n  PayConductorFrame,\n  PayConductorState,\n  PendingRequest,\n} from \"./types\";\nimport { buildIframeUrl } from \"./utils\";\n\nfunction PayConductor(props: PayConductorEmbedProps) {\n  const iframeRef = useRef<any>(null);\n  const [isLoaded, setIsLoaded] = useState<PayConductorState[\"isLoaded\"]>(\n    () => false\n  );\n\n  const [isReady, setIsReady] = useState<PayConductorState[\"isReady\"]>(\n    () => false\n  );\n\n  const [error, setError] = useState<PayConductorState[\"error\"]>(() => null);\n\n  const [iframeUrl, setIframeUrl] = useState<PayConductorState[\"iframeUrl\"]>(\n    () => \"\"\n  );\n\n  const [pendingMap, setPendingMap] = useState<PayConductorState[\"pendingMap\"]>(\n    () => null\n  );\n\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState<\n    PayConductorState[\"selectedPaymentMethod\"]\n  >(() => null);\n\n  const [configSent, setConfigSent] = useState(() => false);\n\n  useEffect(() => {\n    setIframeUrl(\n      buildIframeUrl({\n        publicKey: props.publicKey,\n      })\n    );\n    setIsLoaded(true);\n    setPendingMap(createPendingRequestsMap());\n    const frame: PayConductorFrame = {\n      iframe: iframeRef.current,\n      get isReady() {\n        return isReady;\n      },\n      get error() {\n        return error;\n      },\n    };\n    const config: PayConductorConfig = {\n      publicKey: props.publicKey,\n      intentToken: props.intentToken,\n      theme: props.theme,\n      locale: props.locale,\n      paymentMethods: props.paymentMethods,\n      defaultPaymentMethod: props.defaultPaymentMethod,\n    };\n    const api: PayConductorApi = {\n      confirmPayment: (options: { intentToken: string }) =>\n        confirmPayment(iframeRef.current, pendingMap, options),\n      validate: (data: unknown) =>\n        validatePayment(iframeRef.current, pendingMap, data),\n      reset: () => resetPayment(iframeRef.current, pendingMap),\n      getSelectedPaymentMethod: () => selectedPaymentMethod,\n    };\n    window.PayConductor = {\n      frame,\n      config,\n      api,\n      selectedPaymentMethod: selectedPaymentMethod,\n    };\n    const sendConfigToIframe = async () => {\n      if (!configSent && iframeRef.current) {\n        setConfigSent(true);\n        sendConfig(iframeRef.current, pendingMap, {\n          intentToken: props.intentToken,\n          theme: props.theme,\n          locale: props.locale,\n          paymentMethods: props.paymentMethods,\n          defaultPaymentMethod: props.defaultPaymentMethod,\n          showPaymentButtons: props.showPaymentButtons,\n          nuPayConfig: props.nuPayConfig,\n        });\n      }\n    };\n    const eventHandler = (event: MessageEvent) => {\n      handleMessageEvent(\n        event,\n        pendingMap,\n        (val) => {\n          setIsReady(val);\n          if (val) {\n            sendConfigToIframe();\n          }\n        },\n        (val) => {\n          setError(val);\n        },\n        props.onReady,\n        props.onError,\n        (data) => props.onPaymentComplete?.(data as PaymentResult),\n        (data) => props.onPaymentFailed?.(data as PaymentResult),\n        (data) => props.onPaymentPending?.(data as PaymentResult),\n        (method) => {\n          setSelectedPaymentMethod(method);\n          if (window.PayConductor) {\n            window.PayConductor.selectedPaymentMethod = method;\n          }\n          props.onPaymentMethodSelected?.(method);\n        }\n      );\n    };\n    window.addEventListener(\"message\", eventHandler);\n  }, []);\n\n  return (\n    <div\n      className=\"payconductor\"\n      id=\"payconductor\"\n      style={{\n        width: \"100%\",\n        position: \"relative\",\n      }}\n    >\n      {props.children}\n      {isLoaded ? (\n        <iframe\n          allow=\"payment\"\n          title=\"PayConductor\"\n          ref={iframeRef}\n          src={iframeUrl}\n          style={{\n            width: \"100%\",\n            height: props.height || IFRAME_DEFAULT_HEIGHT_VALUE,\n            border: \"none\",\n          }}\n        />\n      ) : null}\n    </div>\n  );\n}\n\nexport default PayConductor;\n","import type { PayConductorConfig } from \"../iframe/types\";\nimport type { PayConductorFrame } from \"../types\";\ntype UsePayConductorReturn = PayConductorFrame & Partial<PayConductorConfig>;\nexport function usePayConductor(): UsePayConductorReturn {\n  const ctx = typeof window !== \"undefined\" ? window.PayConductor : null;\n  const config = ctx?.config ? {\n    publicKey: ctx.config.publicKey,\n    intentToken: ctx.config.intentToken,\n    theme: ctx.config.theme,\n    locale: ctx.config.locale\n  } : {};\n  const frame = ctx?.frame ? {\n    iframe: ctx.frame.iframe,\n    isReady: ctx.frame.isReady,\n    error: ctx.frame.error\n  } : {\n    iframe: null,\n    isReady: false,\n    error: null\n  };\n  return {\n    ...config,\n    ...frame\n  };\n}","import { POST_MESSAGES } from \"../constants\";\nimport type { BillingDetails, PayConductorConfig, PaymentMethod, PaymentResult } from \"../iframe/types\";\nimport { confirmPayment, createPendingRequestsMap, sendMessageToIframe } from \"../internal\";\nexport type SubmitResult = {\n  error?: {\n    message: string;\n    code?: string;\n    type?: \"validation_error\" | \"payment_error\";\n  };\n  paymentMethod?: PaymentMethod;\n};\nexport type ConfirmPaymentOptions = {\n  intentToken: string;\n  returnUrl?: string;\n};\nexport type UpdateOptions = {\n  billingDetails?: Partial<BillingDetails>;\n  address?: Partial<BillingDetails[\"address\"]>;\n};\nexport interface UseElementReturn {\n  confirmPayment: (options: ConfirmPaymentOptions) => Promise<PaymentResult>;\n  validate: (data: unknown) => Promise<boolean>;\n  reset: () => Promise<void>;\n  getSelectedPaymentMethod: () => PaymentMethod | null;\n  updateConfig: (config: Partial<Pick<PayConductorConfig, \"theme\" | \"locale\" | \"paymentMethods\">>) => void;\n  updateIntentToken: (intentToken: string) => void;\n  update: (options: UpdateOptions) => void;\n  submit: () => Promise<SubmitResult>;\n}\nfunction getIframeFromContext(ctx: typeof window.PayConductor): HTMLIFrameElement | null {\n  if (!ctx?.frame?.iframe) return null;\n  const iframeRef = ctx.frame.iframe;\n  if (iframeRef instanceof HTMLIFrameElement) {\n    return iframeRef;\n  }\n  if (iframeRef && typeof iframeRef === \"object\" && \"value\" in iframeRef) {\n    const value = iframeRef.value;\n    if (value instanceof HTMLIFrameElement) {\n      return value;\n    }\n  }\n  return null;\n}\nexport function useElement(): UseElementReturn {\n  const ctx = typeof window !== \"undefined\" ? window.PayConductor : null;\n  const sendToIframe = (type: string, data?: unknown) => {\n    if (!ctx) return;\n    const iframe = getIframeFromContext(ctx);\n    if (iframe?.contentWindow) {\n      iframe.contentWindow.postMessage({\n        type,\n        data\n      }, \"*\");\n    }\n  };\n  if (!ctx) {\n    return {\n      confirmPayment: async () => {\n        throw new Error(\"PayConductor not initialized\");\n      },\n      validate: async () => {\n        throw new Error(\"PayConductor not initialized\");\n      },\n      reset: async () => {\n        throw new Error(\"PayConductor not initialized\");\n      },\n      getSelectedPaymentMethod: () => null,\n      updateConfig: () => {\n        throw new Error(\"PayConductor not initialized\");\n      },\n      updateIntentToken: () => {\n        throw new Error(\"PayConductor not initialized\");\n      },\n      update: () => {\n        throw new Error(\"PayConductor not initialized\");\n      },\n      submit: async () => {\n        throw new Error(\"PayConductor not initialized\");\n      }\n    };\n  }\n  return {\n    confirmPayment: async (options: ConfirmPaymentOptions): Promise<PaymentResult> => {\n      const iframe = getIframeFromContext(ctx);\n      const pendingMap = createPendingRequestsMap();\n      if (!options.intentToken) {\n        throw new Error(\"Intent token is required\");\n      }\n      return confirmPayment(iframe || undefined, pendingMap, options);\n    },\n    validate: ctx.api.validate,\n    reset: ctx.api.reset,\n    getSelectedPaymentMethod: (): PaymentMethod | null => {\n      return ctx?.selectedPaymentMethod ?? null;\n    },\n    updateConfig: (config: Partial<Pick<PayConductorConfig, \"theme\" | \"locale\" | \"paymentMethods\">>) => {\n      const currentConfig = ctx.config;\n      sendToIframe(POST_MESSAGES.CONFIG, {\n        publicKey: currentConfig?.publicKey,\n        intentToken: currentConfig?.intentToken,\n        theme: config.theme ?? currentConfig?.theme,\n        locale: config.locale ?? currentConfig?.locale,\n        paymentMethods: config.paymentMethods ?? currentConfig?.paymentMethods\n      });\n    },\n    updateIntentToken: (intentToken: string) => {\n      const currentConfig = ctx.config;\n      sendToIframe(POST_MESSAGES.CONFIG, {\n        publicKey: currentConfig?.publicKey,\n        intentToken: intentToken,\n        theme: currentConfig?.theme,\n        locale: currentConfig?.locale,\n        paymentMethods: currentConfig?.paymentMethods\n      });\n    },\n    update: (options: UpdateOptions) => {\n      sendToIframe(POST_MESSAGES.UPDATE, options);\n    },\n    submit: async (): Promise<SubmitResult> => {\n      const iframe = getIframeFromContext(ctx);\n      const pendingMap = createPendingRequestsMap();\n      try {\n        await sendMessageToIframe(iframe || undefined, pendingMap, POST_MESSAGES.CONFIRM_PAYMENT, {});\n        return {\n          paymentMethod: undefined\n        };\n      } catch (error) {\n        const message = error instanceof Error ? error.message : \"Payment failed\";\n        return {\n          error: {\n            message,\n            code: \"payment_error\",\n            type: \"payment_error\"\n          }\n        };\n      }\n    }\n  };\n}"],"names":["IFRAME_BASE_URL_PROD","IFRAME_BASE_URL_DEV","REQUEST_TIMEOUT_MS","IFRAME_DEFAULT_HEIGHT","OutgoingMessage","IncomingMessage","isDev","IFRAME_BASE_URL","ALLOWED_ORIGINS","IFRAME_DEFAULT_HEIGHT_VALUE","REQUEST_TIMEOUT","POST_MESSAGES","ERROR_CODES","buildIframeUrl","config","params","generateRequestId","isValidOrigin","origin","allowedOrigins","createPendingRequestsMap","sendMessageToIframe","iframe","pendingMap","type","data","resolve","reject","requestId","confirmPayment","options","validatePayment","resetPayment","sendConfig","handleMessageEvent","event","setIsReady","setError","onReady","onError","onPaymentComplete","onPaymentFailed","onPaymentPending","onPaymentMethodSelected","payload","error","PayConductor","props","iframeRef","useRef","isLoaded","setIsLoaded","useState","isReady","iframeUrl","setIframeUrl","setPendingMap","selectedPaymentMethod","setSelectedPaymentMethod","configSent","setConfigSent","useEffect","frame","api","sendConfigToIframe","eventHandler","val","_a","method","jsxs","jsx","usePayConductor","ctx","getIframeFromContext","value","useElement","sendToIframe","currentConfig","intentToken"],"mappings":"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"}